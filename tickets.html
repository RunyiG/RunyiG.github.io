<!DOCTYPE html>
<html>
	<head>
		<title>Edgar Degas - Buy Tickets</title>
		<link rel="stylesheet" type="text/css" href="style.css">
		<link href="https://fonts.googleapis.com/css2?family=Acme&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Satisfy&display=swap" rel="stylesheet"> 
	</head>
	<body>
		<nav>
            <div class="header"> 
                <a href="index.html"><h1>Edgar Degas</h1></a>
                <div class="nav">
                    <a href="gallery.html"><p class="navItem"> Gallery </p></a>
                    <a href="tickets.html"><p class="navItem" style="text-decoration: underline;"> Buy Tickets </p></a>
                </div>
            </div>
			<hr style="width: 50vw; text-align: center; border-width: 0.2px">
        </nav>

        <div class="ticket_container">
			<div style="max-width: 50vw;">
				<h2>Buy Your Tickets Now!</h2>
				<h3>The art show will run from December 2nd through December 11th. </h3> 
				<p>Book your ticket in advance, simply enter your email address to get the e-ticket.</p>
				<p>Please note, there is a limit of 10 tickets per party.</p> 
			</div>
			<div class="tickets">
				<p>Number of ticket(s):</p>
				<input type="number" min="0" max="10"  id="numberTicket">
				<p>Enter Email to receive your e-ticket:</p>
				<input type="email" style="width: 100%" id="emailAddress">
				<p>Date of visit:</p>
				<input type="date" min="2022-12-02" max="2022-12-11" id="dateVisit">
				<br><br><button class="button" onclick="checkEmail(), confirm()">Confirm</button> <!-- first check the email is valid, then confirm the tickets -->
			</div>
		</div>

		<script>
			var validEmail = false;

			function checkEmail() {
				var mailFormat=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/; //to use RegEx to confirm that the email is valid
				var getEmail=document.querySelector("#emailAddress").value;
					if (getEmail.match(mailFormat)) {
						validEmail = true;
					}
					else {
						validEmail = false;
					}
			}

			function confirm() {
				var getNumber=document.querySelector("#numberTicket").value;
				if (getNumber<1) { //check that they've entered numbers first
					alert("Please select your number of tickets!");
				}else{
					if(document.getElementById("dateVisit").value == ""){
						alert("Please select a date!");
					}else{
						if(validEmail){ //check that the email is valid
							if (getNumber==1) {
								alert("One ticket has been sent to your email!");
							}else {
								alert(getNumber+" tickets have been sent to your email!");
							}
						}else{
							alert("Email invalid, please re-enter.");
						}
					}
				}
			}
		</script>
	</body>
</html>
